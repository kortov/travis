language: java
jdk:
  - oraclejdk8
sudo: required
services:
  - docker
  - postgresql
cache:
  directories:
    - $HOME/.m2
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
before_script:
  - echo -n sqlcmdsqlcmd | md5sum
  - psql -c "CREATE DATABASE sqlcmd;" -U postgres
  - psql -c "CREATE DATABASE test;" -U postgres
  - psql -c "CREATE USER sqlcmd WITH PASSWORD 'md5<d41d8cd98f00b204e9800998ecf8427e>' SUPERUSER;" -U postgres
  - psql -c "GRANT ALL PRIVILEGES ON DATABASE sqlcmd TO sqlcmd;" -U postgres
  - psql -c "GRANT ALL PRIVILEGES ON DATABASE test TO sqlcmd;" -U postgres
test:
  adapter: postgresql
  database: sqlcmd
addons:
  postgresql: "9.6"